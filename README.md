
<!-- README.md is generated from README.Rmd. Please edit that file -->

# fmp: An R package for interfacing with the Financial Modeling Prep API

<!-- badges: start -->

[![CRAN
status](https://www.r-pkg.org/badges/version/fmp)](https://CRAN.R-project.org/package=fmp)
[![Lifecycle:
maturing](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing)
<!-- badges: end -->

The goal of `fmp` is to provide a simple and consistent interface to the
**Financial Modeling Prep** [Financial Data
API](https://financialmodelingprep.com/) that can be used along side and
integrated with other common R resources for collecting and analyzing
financial data, such as `tidyquant`, `xts`, `TTR`, and `quantmod`.

## Installation

<!-- You can install the released version of fmp from [CRAN](https://CRAN.R-project.org) with: -->

<!-- --- actually not on CRAN yet -->

<!-- ``` r -->

<!-- install.packages("fmp") -->

<!-- ``` -->

You can install the latest development version of fmp from
[Github](https://github.com) with:

``` r
remotes::install_github('jpiburn/fmp')
```

## Getting Started

Before getting started with `fmp` you first must obtain an API key for
the Financial Modeling Prep Financial Data API. For details, see
[here](https://financialmodelingprep.com/developer/docs/pricing/).

Once you sign up, you can add your API key to your `.Renviron` file by
using `fmp_api_key()`. This will add a `FMP_API_KEY` entry to your
`.Renviron` file so it will automatically be available in future
sessions. When first installed however, you will need to reload your
.Renviron file by either restarting R or running
`readRenviron('~/.Renviron')`

``` r
library(fmp)

api_key <- 'my_api_key'
fmp_api_key(api_key)

# reload
readRenviron('~/.Renviron')
```

## Company Valuation

The Financial Modeling Prep Financial Data API, provides several useful
enpoints for company valutation analysis.From general company overviews,
using `fmp_profile()`

``` r
library(dplyr)
#> Warning: package 'dplyr' was built under R version 3.6.3
#> 
#> Attaching package: 'dplyr'
#> The following objects are masked from 'package:stats':
#> 
#>     filter, lag
#> The following objects are masked from 'package:base':
#> 
#>     intersect, setdiff, setequal, union
library(fmp)

my_stocks <- c('AAPL', 'GE')

d <- fmp_profile(my_stocks)

glimpse(d)
#> Rows: 2
#> Columns: 26
#> $ symbol              <chr> "AAPL", "GE"
#> $ price               <dbl> 379.24, 6.71
#> $ beta                <dbl> 1.228499, 1.177065
#> $ vol_avg             <dbl> 34802709, 105497669
#> $ mkt_cap             <dbl> 1.643751e+12, 5.869297e+10
#> $ last_div            <dbl> 3.13, 0.04
#> $ range               <chr> "192.58-399.82", "5.48-13.26"
#> $ changes             <dbl> 8.78, -0.15
#> $ company_name        <chr> "Apple Inc.", "General Electric Company"
#> $ exchange            <chr> "Nasdaq Global Select", "New York Stock Exchange"
#> $ exchange_short_name <chr> "NASDAQ", "NYSE"
#> $ industry            <chr> "Consumer Electronics", "Specialty Industrial M...
#> $ website             <chr> "http://www.apple.com", "http://www.ge.com"
#> $ description         <chr> "Apple Inc. designs, manufactures, and markets ...
#> $ ceo                 <chr> "Mr. Timothy D. Cook", "Mr. H. Lawrence Culp Jr."
#> $ sector              <chr> "Technology", "Industrials"
#> $ country             <chr> "United States", "United States"
#> $ full_time_employees <dbl> 137000, 205000
#> $ phone               <chr> "408-996-1010", "617-443-3000"
#> $ address             <chr> "One Apple Park Way", "5 Necco Street"
#> $ city                <chr> "One Apple Park Way", "5 Necco Street"
#> $ state               <chr> "CA", "MA"
#> $ zip                 <chr> "95014", "02210"
#> $ dcf_diff            <dbl> 89.92, 21.63
#> $ dcf                 <dbl> 297.11, 30.90
#> $ image               <chr> "https://financialmodelingprep.com/image-stock/...
```

To more detailed analysis, such as cash flow and balance sheet
statements, key metrics, and discounted cash flow value.

``` r
library(dplyr)
library(fmp)

my_stocks <- c('AAPL', 'GE')

d_cash <- fmp_cash_flow(my_stocks)
d_balance <- fmp_balance_sheet(my_stocks)
d_metrics <- fmp_key_metrics(my_stocks)

glimpse(d_metrics)
#> Rows: 37
#> Columns: 59
#> $ symbol                                      <chr> "AAPL", "AAPL", "AAPL",...
#> $ date                                        <date> 2019-09-28, 2018-09-29...
#> $ revenue_per_share                           <dbl> 56.34113, 53.59733, 43....
#> $ net_income_per_share                        <dbl> 11.96578309, 12.0134149...
#> $ operating_cash_flow_per_share               <dbl> 15.02674197, 15.6262581...
#> $ free_cash_flow_per_share                    <dbl> 12.7540314, 12.9396815,...
#> $ cash_per_share                              <dbl> 10.5772533, 5.2292691, ...
#> $ book_value_per_share                        <dbl> 19.595334, 21.622371, 2...
#> $ tangible_book_value_per_share               <dbl> 73.30623, 73.80367, 70....
#> $ shareholders_equity_per_share               <dbl> 19.595334, 21.622371, 2...
#> $ interest_debt_per_share                     <dbl> 22.8771757, 21.3422712,...
#> $ market_cap                                  <dbl> 1.150072e+12, 1.051729e...
#> $ enterprise_value                            <dbl> 1203294557700, 11283352...
#> $ pe_ratio                                    <dbl> 20.813515, 17.666917, 1...
#> $ price_to_sales_ratio                        <dbl> 4.42039388, 3.95989840,...
#> $ pocfratio                                   <dbl> 16.573786, 13.582266, 1...
#> $ pfcf_ratio                                  <dbl> 19.527159, 16.402258, 1...
#> $ pb_ratio                                    <dbl> 12.70965827, 9.81575979...
#> $ ptb_ratio                                   <dbl> 12.70965827, 9.81575979...
#> $ ev_to_sales                                 <dbl> 4.624960825, 4.24833003...
#> $ enterprise_value_over_ebitda                <dbl> 15.73407113, 13.7936604...
#> $ ev_to_operating_cash_flow                   <dbl> 1.734079e+01, 1.457157e...
#> $ ev_to_free_cash_flow                        <dbl> 20.43083669, 17.5969684...
#> $ earnings_yield                              <dbl> 0.04804571, 0.05660297,...
#> $ free_cash_flow_yield                        <dbl> 0.05121073, 0.06096721,...
#> $ debt_to_equity                              <dbl> 2.7410043, 2.4133014, 1...
#> $ debt_to_assets                              <dbl> 0.7326921, 0.7070285, 0...
#> $ net_debt_to_ebitda                          <dbl> 0.69593473, 0.93649222,...
#> $ current_ratio                               <dbl> 1.540126, 1.123843, 1.2...
#> $ interest_coverage                           <dbl> 18.382830, 22.500926, 2...
#> $ income_quality                              <dbl> 1.25580932, 1.30073407,...
#> $ dividend_yield                              <dbl> 0.012276627, 0.01303757...
#> $ payout_ratio                                <dbl> 0.25551976, 0.23033378,...
#> $ sales_general_and_administrative_to_revenue <dbl> 0.0000000, 0.0000000, 0...
#> $ research_and_ddevelopement_to_revenue       <dbl> 0.06233136, 0.05360041,...
#> $ intangibles_to_total_assets                 <dbl> 0.000000000, 0.00000000...
#> $ capex_to_operating_cash_flow                <dbl> 6.6118152, 5.8164200, 4...
#> $ capex_to_revenue                            <dbl> 24.79028, 19.95005, 17....
#> $ capex_to_depreciation                       <dbl> 1.1955217, 0.8189739, 0...
#> $ stock_based_compensation_to_revenue         <dbl> 2.332285e-02, 2.010580e...
#> $ graham_number                               <dbl> 72.633698, 76.449765, 7...
#> $ roic                                        <dbl> 0.282377855, 0.29294901...
#> $ return_on_tangible_assets                   <dbl> 0.163230098, 0.16277530...
#> $ graham_net_net                              <dbl> -27.7670224, -34.893308...
#> $ working_capital                             <dbl> 5.7101e+10, 1.4473e+10,...
#> $ tangible_asset_value                        <dbl> NA, NA, 126032000000, 1...
#> $ net_current_asset_value                     <dbl> -8.52090e+10, -1.27239e...
#> $ invested_capital                            <dbl> NA, NA, NA, NA, NA, NA,...
#> $ average_receivables                         <dbl> 23056000000, 2318600000...
#> $ average_payables                            <dbl> 51062000000, 5588800000...
#> $ average_inventory                           <dbl> 4031000000, 3956000000,...
#> $ days_sales_outstanding                      <dbl> 32.16305, 31.86389, 28....
#> $ days_payables_outstanding                   <dbl> 104.31408, 124.57021, 1...
#> $ days_of_inventory_on_hand                   <dbl> 9.263639, 8.817631, 12....
#> $ receivables_turnover                        <dbl> 11.348425, 11.454973, 1...
#> $ payables_turnover                           <dbl> 3.499048, 2.930074, 2.8...
#> $ inventory_turnover                          <dbl> 39.401364, 41.394338, 2...
#> $ roe                                         <dbl> 0.610644505, 0.55560118...
#> $ capex_per_share                             <dbl> 2.2727105, 2.6865766, 2...
```

## More documentation coming soon
